import{a as W,b as L,c as P,d as j,e as O,f as B,g as H,h as q,i as z,j as R,k as G}from"./chunk-TJEJZHC3.js";import{a as J,b as K}from"./chunk-SCQORROL.js";import{$ as g,B as S,C as k,J as b,K as _,L as w,M as C,N as x,O as e,P as i,Q as I,R as N,S as p,T as m,W as n,X as h,Y as A,Z as T,aa as f,ba as y,ea as U,i as M,l as E,n as c,o as u,oa as F,qa as V,wa as D,x as l}from"./chunk-JVVBI7EJ.js";var v=class s{constructor(r){this.http=r}apiUrl="https://jpf-helpdesk-api-cghmhpe4f0ewe2dk.centralus-01.azurewebsites.net/api";getAllUsers(){return this.http.get(this.apiUrl)}static \u0275fac=function(t){return new(t||s)(E(V))};static \u0275prov=M({token:s,factory:s.\u0275fac,providedIn:"root"})};var $=s=>["/assets/detail",s],X=(s,r)=>r.userID,ee=(s,r)=>r.assetID;function te(s,r){if(s&1&&(e(0,"option",18),n(1),i()),s&2){let t=r.$implicit;x("value",t.userID),l(),h(t.fullName)}}function ie(s,r){if(s&1&&(e(0,"tr",29)(1,"td",31)(2,"div",32),n(3),i()(),e(4,"td",31)(5,"span",33),n(6),i()(),e(7,"td",34)(8,"div",35),n(9),i()(),e(10,"td",31)(11,"div",35),n(12),i()()()),s&2){let t=r.$implicit;x("routerLink",U(5,$,t.assetID)),l(3),h(t.assetName),l(3),A(" ",t.assetType," "),l(3),h(t.description||"N/A"),l(3),h(t.userName)}}function ne(s,r){s&1&&n(0," No assets match your search criteria ")}function re(s,r){s&1&&n(0," No assets found ")}function se(s,r){if(s&1&&(e(0,"tr")(1,"td",36),b(2,ne,1,0)(3,re,1,0),i()()),s&2){let t=m();l(2),_(t.searchTerm||t.filterType||t.filterUser?2:3)}}function oe(s,r){if(s&1&&(e(0,"div",43),n(1),i()),s&2){let t=m(2);l(),A(" ",t.errorMessage," ")}}function ae(s,r){if(s&1&&(e(0,"option",18),n(1),i()),s&2){let t=r.$implicit;x("value",t.userID),l(),T("",t.fullName," (",t.email,")")}}function le(s,r){if(s&1){let t=N();e(0,"div",30)(1,"div",37)(2,"div",38),p("click",function(){c(t);let o=m();return u(o.closeCreateModal())}),i(),e(3,"span",39),n(4,"\u200B"),i(),e(5,"div",40)(6,"div",41)(7,"h3",42),n(8,"Create New Asset"),i(),b(9,oe,2,1,"div",43),e(10,"form",44),p("ngSubmit",function(){c(t);let o=m();return u(o.createAsset())}),e(11,"div",45)(12,"div")(13,"label",46),n(14,"Owner"),i(),e(15,"select",47),y("ngModelChange",function(o){c(t);let d=m();return f(d.newAsset.userID,o)||(d.newAsset.userID=o),u(o)}),w(16,ae,2,3,"option",18,X),i()(),e(18,"div")(19,"label",48),n(20,"Asset Type"),i(),e(21,"select",49),y("ngModelChange",function(o){c(t);let d=m();return f(d.newAsset.assetType,o)||(d.newAsset.assetType=o),u(o)}),e(22,"option",13),n(23,"Home"),i(),e(24,"option",14),n(25,"Vehicle"),i(),e(26,"option",15),n(27,"Personal Property"),i()()(),e(28,"div")(29,"label",50),n(30,"Asset Name"),i(),e(31,"input",51),y("ngModelChange",function(o){c(t);let d=m();return f(d.newAsset.assetName,o)||(d.newAsset.assetName=o),u(o)}),i()(),e(32,"div")(33,"label",52),n(34,"Description"),i(),e(35,"textarea",53),y("ngModelChange",function(o){c(t);let d=m();return f(d.newAsset.description,o)||(d.newAsset.description=o),u(o)}),i()()(),e(36,"div",54)(37,"button",55),n(38),i(),e(39,"button",56),p("click",function(){c(t);let o=m();return u(o.closeCreateModal())}),n(40," Cancel "),i()()()()()()()}if(s&2){let t=m();l(9),_(t.errorMessage?9:-1),l(6),g("ngModel",t.newAsset.userID),l(),C(t.users),l(5),g("ngModel",t.newAsset.assetType),l(10),g("ngModel",t.newAsset.assetName),l(4),g("ngModel",t.newAsset.description),l(2),x("disabled",t.loading),l(),A(" ",t.loading?"Creating...":"Create Asset"," ")}}var Q=class s{constructor(r,t){this.assetService=r;this.userService=t}assets=[];users=[];filteredAssets=[];loading=!1;errorMessage="";searchTerm="";filterType="";filterUser="";showCreateModal=!1;newAsset={assetType:"Home",assetName:"",description:"",userID:""};ngOnInit(){this.loadAssets(),this.loadUsers()}loadAssets(){this.loading=!0,this.assetService.getAssets().subscribe({next:r=>{this.assets=r,this.applyFilters(),this.loading=!1},error:r=>{console.error("Error loading assets:",r),this.errorMessage="Failed to load assets",this.loading=!1}})}loadUsers(){this.userService.getAllUsers().subscribe({next:r=>{this.users=r},error:r=>{console.error("Error loading users:",r)}})}applyFilters(){this.filteredAssets=this.assets.filter(r=>{let t=r.assetName.toLowerCase().includes(this.searchTerm.toLowerCase())||r.assetType.toLowerCase().includes(this.searchTerm.toLowerCase())||r.description&&r.description.toLowerCase().includes(this.searchTerm.toLowerCase())||r.userName&&r.userName.toLowerCase().includes(this.searchTerm.toLowerCase()),a=!this.filterType||r.assetType===this.filterType,o=!this.filterUser||r.userID===this.filterUser;return t&&a&&o})}openCreateModal(){this.showCreateModal=!0,this.errorMessage="",this.newAsset={assetType:"Home",assetName:"",description:"",userID:this.users.length>0?this.users[0].userID:""}}closeCreateModal(){this.showCreateModal=!1,this.errorMessage=""}createAsset(){if(!this.newAsset.assetName||!this.newAsset.userID){this.errorMessage="Please fill in all required fields";return}this.loading=!0,this.assetService.createAsset(this.newAsset).subscribe({next:()=>{this.loadAssets(),this.closeCreateModal(),this.loading=!1},error:r=>{console.error("Error creating asset:",r),this.errorMessage="Failed to create asset",this.loading=!1}})}clearFilters(){this.searchTerm="",this.filterType="",this.filterUser="",this.applyFilters()}static \u0275fac=function(t){return new(t||s)(S(K),S(v))};static \u0275cmp=k({type:s,selectors:[["app-admin-assets"]],decls:62,vars:7,consts:[[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8","py-8"],[1,"mb-8","flex","justify-between","items-start"],[1,"text-3xl","font-bold","text-gray-900"],[1,"mt-1","text-gray-600"],[1,"px-3","py-1.5","bg-primary","text-white","rounded-md","hover:bg-opacity-90","transition-colors","font-medium","text-sm",3,"click"],[1,"bg-white","rounded-lg","shadow-md","p-6","mb-6"],[1,"text-lg","font-semibold","text-gray-900","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-4","gap-4"],["for","search",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","text","id","search","placeholder","Search by name, type, description...",1,"block","w-full","px-3","py-2","text-base","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-primary","focus:border-primary","sm:text-sm",3,"ngModelChange","input","ngModel"],["for","filterType",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","filterType",1,"block","w-full","pl-3","pr-10","py-2","text-base","border-gray-300","focus:outline-none","focus:ring-primary","focus:border-primary","sm:text-sm","rounded-md","border",3,"ngModelChange","change","ngModel"],["value",""],["value","Home"],["value","Vehicle"],["value","Personal Property"],["for","filterUser",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","filterUser",1,"block","w-full","pl-3","pr-10","py-2","text-base","border-gray-300","focus:outline-none","focus:ring-primary","focus:border-primary","sm:text-sm","rounded-md","border",3,"ngModelChange","change","ngModel"],[3,"value"],[1,"flex","items-end"],[1,"w-full","px-4","py-2","bg-gray-200","text-gray-700","rounded-md","hover:bg-gray-300","transition-colors","font-medium","text-sm",3,"click"],[1,"bg-white","rounded-lg","shadow-md","overflow-hidden","border","border-gray-200"],[1,"px-6","py-4","border-b","border-gray-200"],[1,"text-lg","font-semibold","text-gray-900"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gray-50"],[1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],[1,"hover:bg-gray-50","cursor-pointer",3,"routerLink"],["aria-labelledby","modal-title","role","dialog","aria-modal","true",1,"fixed","z-10","inset-0","overflow-y-auto"],[1,"px-6","py-4","whitespace-nowrap"],[1,"text-sm","font-medium","text-gray-900"],[1,"px-2","inline-flex","text-xs","leading-5","font-semibold","rounded-full","bg-blue-100","text-blue-800"],[1,"px-6","py-4"],[1,"text-sm","text-gray-900"],["colspan","4",1,"px-6","py-4","text-center","text-gray-500"],[1,"flex","items-end","justify-center","min-h-screen","pt-4","px-4","pb-20","text-center","sm:block","sm:p-0"],[1,"fixed","inset-0","bg-gray-500","bg-opacity-75","transition-opacity",3,"click"],["aria-hidden","true",1,"hidden","sm:inline-block","sm:align-middle","sm:h-screen"],[1,"inline-block","align-bottom","bg-white","rounded-lg","text-left","overflow-hidden","shadow-xl","transform","transition-all","sm:my-8","sm:align-middle","sm:max-w-lg","sm:w-full"],[1,"bg-white","px-4","pt-5","pb-4","sm:p-6","sm:pb-4"],[1,"text-lg","leading-6","font-medium","text-gray-900","mb-4"],[1,"mb-4","bg-red-50","border","border-red-200","text-red-600","px-4","py-3","rounded"],[3,"ngSubmit"],[1,"space-y-4"],["for","userID",1,"block","text-sm","font-medium","text-gray-700"],["id","userID","name","userID","required","",1,"mt-1","block","w-full","pl-3","pr-10","py-2","text-base","border-gray-300","focus:outline-none","focus:ring-primary","focus:border-primary","sm:text-sm","rounded-md","border",3,"ngModelChange","ngModel"],["for","assetType",1,"block","text-sm","font-medium","text-gray-700"],["id","assetType","name","assetType","required","",1,"mt-1","block","w-full","pl-3","pr-10","py-2","text-base","border-gray-300","focus:outline-none","focus:ring-primary","focus:border-primary","sm:text-sm","rounded-md","border",3,"ngModelChange","ngModel"],["for","assetName",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","assetName","name","assetName","required","","placeholder","Enter asset name",1,"mt-1","block","w-full","border","border-gray-300","rounded-md","shadow-sm","py-2","px-3","focus:outline-none","focus:ring-primary","focus:border-primary","sm:text-sm",3,"ngModelChange","ngModel"],["for","description",1,"block","text-sm","font-medium","text-gray-700"],["id","description","name","description","rows","3","placeholder","Enter asset description",1,"mt-1","block","w-full","border","border-gray-300","rounded-md","shadow-sm","py-2","px-3","focus:outline-none","focus:ring-primary","focus:border-primary","sm:text-sm",3,"ngModelChange","ngModel"],[1,"mt-5","sm:mt-6","sm:grid","sm:grid-cols-2","sm:gap-3","sm:grid-flow-row-dense"],["type","submit",1,"w-full","inline-flex","justify-center","rounded-md","border","border-transparent","shadow-sm","px-4","py-2","bg-primary","text-base","font-medium","text-white","hover:bg-opacity-90","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-primary","sm:col-start-2","sm:text-sm","disabled:opacity-50",3,"disabled"],["type","button",1,"mt-3","w-full","inline-flex","justify-center","rounded-md","border","border-gray-300","shadow-sm","px-4","py-2","bg-white","text-base","font-medium","text-gray-700","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-primary","sm:mt-0","sm:col-start-1","sm:text-sm",3,"click"]],template:function(t,a){t&1&&(I(0,"app-navbar"),e(1,"div",0)(2,"div",1)(3,"div")(4,"h1",2),n(5,"Asset Management"),i(),e(6,"p",3),n(7,"View and manage all assets in the system"),i()(),e(8,"button",4),p("click",function(){return a.openCreateModal()}),n(9," Create New Asset "),i()(),e(10,"div",5)(11,"h3",6),n(12,"Search & Filters"),i(),e(13,"div",7)(14,"div")(15,"label",8),n(16,"Search"),i(),e(17,"input",9),y("ngModelChange",function(d){return f(a.searchTerm,d)||(a.searchTerm=d),d}),p("input",function(){return a.applyFilters()}),i()(),e(18,"div")(19,"label",10),n(20,"Asset Type"),i(),e(21,"select",11),y("ngModelChange",function(d){return f(a.filterType,d)||(a.filterType=d),d}),p("change",function(){return a.applyFilters()}),e(22,"option",12),n(23,"All Types"),i(),e(24,"option",13),n(25,"Home"),i(),e(26,"option",14),n(27,"Vehicle"),i(),e(28,"option",15),n(29,"Personal Property"),i()()(),e(30,"div")(31,"label",16),n(32,"User"),i(),e(33,"select",17),y("ngModelChange",function(d){return f(a.filterUser,d)||(a.filterUser=d),d}),p("change",function(){return a.applyFilters()}),e(34,"option",12),n(35,"All Users"),i(),w(36,te,2,2,"option",18,X),i()(),e(38,"div",19)(39,"button",20),p("click",function(){return a.clearFilters()}),n(40," Clear Filters "),i()()()(),e(41,"div",21)(42,"div",22)(43,"h3",23),n(44),i()(),e(45,"div",24)(46,"table",25)(47,"thead",26)(48,"tr")(49,"th",27),n(50,"Asset Name"),i(),e(51,"th",27),n(52,"Type"),i(),e(53,"th",27),n(54,"Description"),i(),e(55,"th",27),n(56,"Owner"),i()()(),e(57,"tbody",28),w(58,ie,13,7,"tr",29,ee,!1,se,4,1,"tr"),i()()()()(),b(61,le,41,7,"div",30)),t&2&&(l(17),g("ngModel",a.searchTerm),l(4),g("ngModel",a.filterType),l(12),g("ngModel",a.filterUser),l(3),C(a.users),l(8),T(" Assets (",a.filteredAssets.length," of ",a.assets.length,") "),l(14),C(a.filteredAssets),l(3),_(a.showCreateModal?61:-1))},dependencies:[F,G,B,q,z,W,H,L,P,R,O,j,D,J],encapsulation:2})};export{Q as AdminAssetsComponent};
