import{a as K}from"./chunk-HDRLVKTF.js";import{a as P,b as W,c as F,d as j,e as L,f as B,g as O,h as q,i as H,j as R,k as z}from"./chunk-4LXA2J5H.js";import{a as G,b as J}from"./chunk-CAYGV3T3.js";import{$ as y,B as C,C as M,J as u,K as f,L as w,M as v,N as k,O as t,P as i,Q as E,R as D,S as b,T as d,V as T,W as n,X as x,Y as g,Z as I,aa as h,ba as _,ca as S,fa as U,ga as V,n as c,na as N,o as p,oa as A,x as a}from"./chunk-6KXHALII.js";var X=(o,r)=>r.assetID,Y=(o,r)=>r.ticketID;function Z(o,r){if(o&1&&(t(0,"p",22),n(1),i()),o&2){let e=d().$implicit;a(),x(e.description)}}function $(o,r){if(o&1&&(t(0,"div",6)(1,"div",19)(2,"div")(3,"span",20),n(4),i(),t(5,"h4",21),n(6),i(),u(7,Z,2,1,"p",22),i()()()),o&2){let e=r.$implicit;a(4),g(" ",e.assetType," "),a(2),x(e.assetName),a(),f(e.description?7:-1)}}function ee(o,r){o&1&&(t(0,"p",7),n(1,"No assets found"),i())}function te(o,r){if(o&1&&(t(0,"div",25),n(1),i()),o&2){let e=d().$implicit;a(),x(e.description)}}function ie(o,r){if(o&1&&(t(0,"tr",17)(1,"td",23)(2,"div",24),n(3),i(),u(4,te,2,1,"div",25),i(),t(5,"td",26)(6,"div",27),n(7),i(),t(8,"div",25),n(9),i()(),t(10,"td",26)(11,"span"),n(12),i()(),t(13,"td",26)(14,"span"),n(15),i()(),t(16,"td",28),n(17),U(18,"date"),i()()),o&2){let e=r.$implicit,l=d();a(3),x(e.title),a(),f(e.description?4:-1),a(3),x(e.assetName),a(2),x(e.assetType),a(2),T(S("px-2 inline-flex text-xs leading-5 font-semibold rounded-full ",l.getPriorityColor(e.priority))),a(),g(" ",e.priority," "),a(2),T(S("px-2 inline-flex text-xs leading-5 font-semibold rounded-full ",l.getStatusColor(e.status))),a(),g(" ",e.status," "),a(2),g(" ",V(18,13,e.createdDate,"short")," ")}}function ne(o,r){o&1&&(t(0,"tr")(1,"td",29),n(2,"No tickets found"),i()())}function re(o,r){if(o&1&&(t(0,"div",36),n(1),i()),o&2){let e=d(2);a(),g(" ",e.errorMessage," ")}}function oe(o,r){if(o&1&&(t(0,"option",41),n(1),i()),o&2){let e=r.$implicit;k("value",e.assetID),a(),I("",e.assetName," (",e.assetType,")")}}function ae(o,r){if(o&1){let e=D();t(0,"div",18)(1,"div",30)(2,"div",31),b("click",function(){c(e);let s=d();return p(s.closeCreateTicketModal())}),i(),t(3,"span",32),n(4,"\u200B"),i(),t(5,"div",33)(6,"div",34)(7,"h3",35),n(8,"Create New Ticket"),i(),u(9,re,2,1,"div",36),t(10,"form",37),b("ngSubmit",function(){c(e);let s=d();return p(s.createTicket())}),t(11,"div",38)(12,"div")(13,"label",39),n(14,"Asset"),i(),t(15,"select",40),_("ngModelChange",function(s){c(e);let m=d();return h(m.newTicket.assetID,s)||(m.newTicket.assetID=s),p(s)}),w(16,oe,2,3,"option",41,X),i()(),t(18,"div")(19,"label",42),n(20,"Title"),i(),t(21,"input",43),_("ngModelChange",function(s){c(e);let m=d();return h(m.newTicket.title,s)||(m.newTicket.title=s),p(s)}),i()(),t(22,"div")(23,"label",44),n(24,"Description"),i(),t(25,"textarea",45),_("ngModelChange",function(s){c(e);let m=d();return h(m.newTicket.description,s)||(m.newTicket.description=s),p(s)}),i()(),t(26,"div")(27,"label",46),n(28,"Priority"),i(),t(29,"select",47),_("ngModelChange",function(s){c(e);let m=d();return h(m.newTicket.priority,s)||(m.newTicket.priority=s),p(s)}),t(30,"option",48),n(31,"Low"),i(),t(32,"option",49),n(33,"Medium"),i(),t(34,"option",50),n(35,"High"),i()()()(),t(36,"div",51)(37,"button",52),n(38),i(),t(39,"button",53),b("click",function(){c(e);let s=d();return p(s.closeCreateTicketModal())}),n(40," Cancel "),i()()()()()()()}if(o&2){let e=d();a(9),f(e.errorMessage?9:-1),a(6),y("ngModel",e.newTicket.assetID),a(),v(e.assets),a(5),y("ngModel",e.newTicket.title),a(4),y("ngModel",e.newTicket.description),a(4),y("ngModel",e.newTicket.priority),a(8),k("disabled",e.loading),a(),g(" ",e.loading?"Creating...":"Create Ticket"," ")}}var Q=class o{constructor(r,e){this.assetService=r;this.ticketService=e}assets=[];tickets=[];showCreateTicketModal=!1;newTicket={assetID:"",title:"",description:"",priority:"Medium"};loading=!1;errorMessage="";ngOnInit(){this.loadAssets(),this.loadTickets()}loadAssets(){this.assetService.getAssets().subscribe({next:r=>{this.assets=r},error:r=>{console.error("Error loading assets:",r)}})}loadTickets(){this.ticketService.getTickets().subscribe({next:r=>{this.tickets=r},error:r=>{console.error("Error loading tickets:",r)}})}openCreateTicketModal(){this.showCreateTicketModal=!0,this.newTicket={assetID:this.assets[0]?.assetID||"",title:"",description:"",priority:"Medium"},this.errorMessage=""}closeCreateTicketModal(){this.showCreateTicketModal=!1,this.errorMessage=""}createTicket(){if(!this.newTicket.title||!this.newTicket.assetID){this.errorMessage="Please fill in all required fields";return}this.loading=!0,this.ticketService.createTicket(this.newTicket).subscribe({next:()=>{this.loading=!1,this.closeCreateTicketModal(),this.loadTickets()},error:r=>{this.loading=!1,this.errorMessage=r.error?.message||"Error creating ticket"}})}getStatusColor(r){switch(r){case"Open":return"bg-blue-100 text-blue-800";case"In Progress":return"bg-yellow-100 text-yellow-800";case"Resolved":return"bg-green-100 text-green-800";case"Closed":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}}getPriorityColor(r){switch(r){case"High":return"bg-red-100 text-red-800";case"Medium":return"bg-orange-100 text-orange-800";case"Low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}}static \u0275fac=function(e){return new(e||o)(C(J),C(K))};static \u0275cmp=M({type:o,selectors:[["app-user-dashboard"]],decls:40,vars:3,consts:[[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8","py-8"],[1,"mb-8"],[1,"text-3xl","font-bold","text-gray-900"],[1,"mt-2","text-gray-600"],[1,"text-xl","font-semibold","text-gray-900","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-4"],[1,"bg-white","rounded-lg","shadow-md","p-6","hover:shadow-lg","transition-shadow"],[1,"text-gray-500","col-span-full"],[1,"flex","justify-between","items-center","mb-4"],[1,"text-xl","font-semibold","text-gray-900"],[1,"px-3","py-1.5","bg-primary","text-white","rounded-md","hover:bg-opacity-90","transition-colors","font-medium","text-sm",3,"click"],[1,"bg-white","rounded-lg","shadow-md","overflow-hidden","border","border-gray-200"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gray-50"],[1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],[1,"hover:bg-gray-50"],["aria-labelledby","modal-title","role","dialog","aria-modal","true",1,"fixed","z-10","inset-0","overflow-y-auto"],[1,"flex","items-start","justify-between"],[1,"inline-block","px-3","py-1","text-xs","font-semibold","text-primary","bg-blue-100","rounded-full","mb-2"],[1,"text-lg","font-semibold","text-gray-900"],[1,"text-sm","text-gray-600","mt-2"],[1,"px-6","py-4"],[1,"text-sm","font-medium","text-gray-900"],[1,"text-sm","text-gray-500"],[1,"px-6","py-4","whitespace-nowrap"],[1,"text-sm","text-gray-900"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-gray-500"],["colspan","5",1,"px-6","py-4","text-center","text-gray-500"],[1,"flex","items-end","justify-center","min-h-screen","pt-4","px-4","pb-20","text-center","sm:block","sm:p-0"],[1,"fixed","inset-0","bg-gray-500","bg-opacity-75","transition-opacity",3,"click"],["aria-hidden","true",1,"hidden","sm:inline-block","sm:align-middle","sm:h-screen"],[1,"inline-block","align-bottom","bg-white","rounded-lg","text-left","overflow-hidden","shadow-xl","transform","transition-all","sm:my-8","sm:align-middle","sm:max-w-lg","sm:w-full"],[1,"bg-white","px-4","pt-5","pb-4","sm:p-6","sm:pb-4"],[1,"text-lg","leading-6","font-medium","text-gray-900","mb-4"],[1,"mb-4","bg-red-50","border","border-red-200","text-red-600","px-4","py-3","rounded"],[3,"ngSubmit"],[1,"space-y-4"],["for","asset",1,"block","text-sm","font-medium","text-gray-700"],["id","asset","name","assetID","required","",1,"mt-1","block","w-full","pl-3","pr-10","py-2","text-base","border-gray-300","focus:outline-none","focus:ring-primary","focus:border-primary","sm:text-sm","rounded-md","border",3,"ngModelChange","ngModel"],[3,"value"],["for","title",1,"block","text-sm","font-medium","text-gray-700"],["type","text","id","title","name","title","required","","placeholder","Enter ticket title",1,"mt-1","block","w-full","border","border-gray-300","rounded-md","shadow-sm","py-2","px-3","focus:outline-none","focus:ring-primary","focus:border-primary","sm:text-sm",3,"ngModelChange","ngModel"],["for","description",1,"block","text-sm","font-medium","text-gray-700"],["id","description","name","description","rows","3","placeholder","Enter ticket description",1,"mt-1","block","w-full","border","border-gray-300","rounded-md","shadow-sm","py-2","px-3","focus:outline-none","focus:ring-primary","focus:border-primary","sm:text-sm",3,"ngModelChange","ngModel"],["for","priority",1,"block","text-sm","font-medium","text-gray-700"],["id","priority","name","priority",1,"mt-1","block","w-full","pl-3","pr-10","py-2","text-base","border-gray-300","focus:outline-none","focus:ring-primary","focus:border-primary","sm:text-sm","rounded-md","border",3,"ngModelChange","ngModel"],["value","Low"],["value","Medium"],["value","High"],[1,"mt-5","sm:mt-6","sm:grid","sm:grid-cols-2","sm:gap-3","sm:grid-flow-row-dense"],["type","submit",1,"w-full","inline-flex","justify-center","rounded-md","border","border-transparent","shadow-sm","px-4","py-2","bg-primary","text-base","font-medium","text-white","hover:bg-opacity-90","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-primary","sm:col-start-2","sm:text-sm","disabled:opacity-50",3,"disabled"],["type","button",1,"mt-3","w-full","inline-flex","justify-center","rounded-md","border","border-gray-300","shadow-sm","px-4","py-2","bg-white","text-base","font-medium","text-gray-700","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-primary","sm:mt-0","sm:col-start-1","sm:text-sm",3,"click"]],template:function(e,l){e&1&&(E(0,"app-navbar"),t(1,"div",0)(2,"div",1)(3,"h2",2),n(4,"My Dashboard"),i(),t(5,"p",3),n(6,"Manage your assets and service requests"),i()(),t(7,"div",1)(8,"h3",4),n(9,"My Assets"),i(),t(10,"div",5),w(11,$,8,3,"div",6,X,!1,ee,2,0,"p",7),i()(),t(14,"div")(15,"div",8)(16,"h3",9),n(17,"My Tickets"),i(),t(18,"button",10),b("click",function(){return l.openCreateTicketModal()}),n(19," Create New Ticket "),i()(),t(20,"div",11)(21,"div",12)(22,"table",13)(23,"thead",14)(24,"tr")(25,"th",15),n(26,"Title"),i(),t(27,"th",15),n(28,"Asset"),i(),t(29,"th",15),n(30,"Priority"),i(),t(31,"th",15),n(32,"Status"),i(),t(33,"th",15),n(34,"Created"),i()()(),t(35,"tbody",16),w(36,ie,19,16,"tr",17,Y,!1,ne,3,0,"tr"),i()()()()()(),u(39,ae,41,7,"div",18)),e&2&&(a(11),v(l.assets),a(25),v(l.tickets),a(3),f(l.showCreateTicketModal?39:-1))},dependencies:[A,z,B,q,H,P,O,W,F,R,L,j,G,N],encapsulation:2})};export{Q as UserDashboardComponent};
